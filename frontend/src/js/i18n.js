(function(){
  const DICTS = {
    ru: {
      'nav.home': 'Главная',
      'nav.register': 'Зарегистрироваться',
      'nav.login': 'Войти',
      'nav.profile': 'Кабинет команды',
      'nav.logout': 'Выход',
      'hero.title1': 'Akylman Quiz Bowl',
      'hero.subtitle': 'Для учеников средней и старшей школы',
      'hero.cta': 'Зарегистрироваться',
      'about.title': 'О соревновании',
      'about.prelim': 'Отборочный этап',
      'about.prelim.desc': 'На этом этапе команды проходят онлайн-тестирование по выбранным категориям.',
      'about.semi': 'Полуфинал',
      'about.semi.desc': 'Этап выявляет лучшие команды среди уже успешных. На этом этапе проводится онлайн-тестирование.',
      'about.final': 'Финал',
      'about.final.desc': 'Финал проводится в оффлайн формате в Президентском лицее «Акылман» (город Чолпон-Ата). Итоговый тест между лучшими командами по результатам полуфинала.',
      'how.title': 'Как это работает',
      'how.team': 'Размер команды',
      'how.team.desc': '* Команда должна состоять из учеников 8-10 классов. * Все члены команды должны быть из одной школы. * В команде должно быть от 3 до 6 человек.',
      'how.cats': 'Категории',
      'how.format': 'Формат соревнования',
      'how.format.desc': 'Этапы 1 и 2 проводятся в онлайн-формате с использованием тестовых вопросов по выбранным категориям. Третий этап (Финал) проводится в оффлайн-формате в Президентском лицее «Акылман» (город Чолпон-Ата).',
      'timeline.title': 'Таймлайн',
      'timeline.final': 'Финал',
      'cats.title': 'Категории',
      'timeline.online1': 'Онлайн Этап 1',
      'timeline.online2': 'Онлайн Этап 2',
      'timeline.offline': 'Оффлайн Этап',
      'timeline.stage1.title': 'Этап 1 - Отборочный тур',
      'timeline.stage1.desc': 'На этом этапе команды проходят онлайн-тестирование по выбранным категориям. Участники отвечают на вопросы с множественным выбором и короткими ответами. По результатам этого этапа определяются команды, которые пройдут в следующий раунд.',
      'timeline.stage2.title': 'Этап 2 - Полуфинал',
      'timeline.stage2.desc': 'Этап выявляет лучшие команды среди уже успешных. На этом этапе проводится онлайн-тестирование с более сложными вопросами. Команды соревнуются в режиме реального времени, отвечая на блиц-вопросы по различным категориям знаний.',
      'timeline.stage3.title': 'Этап 3 - Финал',
      'timeline.stage3.desc': 'Финал проводится в оффлайн формате в Президентском лицее «Акылман» (город Чолпон-Ата). Итоговый тест между лучшими командами по результатам полуфинала. Победители определяются по общему количеству набранных баллов.',
      'footer.cta_title': 'Акылманга сапар алыңыз!',
      'footer.cta_subtitle': 'Присоединяйтесь к международному интеллектуальному турниру для школьников и откройте новые возможности для своей команды.',
      'footer.cta_button': 'Зарегистрировать команду',
      'footer.student_project': 'Этот сайт — учебный проект, созданный учеником 10 класса Президентского лицея «Акылман».',
      'footer.rights': 'Все права защищены.',
      'footer.privacy': 'Политика конфиденциальности',
      'footer.terms': 'Условия участия',
      'login.title': 'Вход',
      'login.email': 'Email',
      'login.login': 'Логин',
      'login.password': 'Пароль',
      'login.submit': 'Войти',
      'login.error': 'Неправильный логин или пароль',
      'login.forgot_password': 'Забыли пароль?',
      'reset.title': 'Сброс пароля',
      'reset.enter_email': 'Введите email для получения кода сброса:',
      'reset.send_code': 'Отправить код',
      'reset.sending': 'Отправка...',
      'reset.enter_code_only': 'Введите код из письма:',
      'reset.enter_code': 'Введите код из письма и новый пароль:',
      'reset.enter_new_password': 'Введите новый пароль:',
      'reset.code': 'Код из письма',
      'reset.new_password': 'Новый пароль',
      'reset.verify_code': 'Проверить код',
      'reset.verifying': 'Проверка...',
      'reset.reset': 'Сбросить пароль',
      'reset.resetting': 'Сброс...',
      'reset.back': 'Назад',
      'reset.cancel': 'Отмена',
      'reset.code_sent': 'Код отправлен на email (если такой email зарегистрирован)',
      'reset.success': 'Пароль успешно изменен! Теперь вы можете войти.',
      'reset.timer': 'Код действителен:',
      'register.title': 'Регистрация команды',
      'register.team_name': 'Название команды',
      'register.login': 'Логин команды',
      'register.password': 'Пароль',
      'register.password2': 'Повтор пароля',
      'register.captain_name': 'ФИО капитана',
      'register.captain_email': 'Email капитана',
      'register.captain_phone': 'Телефон капитана',
      'register.school': 'Школа',
      'register.city': 'Мектептин адреси',
      'register.member_name': 'ФИО участника',
      'register.member_class': 'Класс',
      'register.members_count': 'Количество участников',
      'register.submit': 'Зарегистрироваться',
      'register.password.length': '8 символов',
      'register.password.number': 'Цифра',
      'register.password.lowercase': 'Строчная буква',
      'register.password.uppercase': 'Заглавная буква',
      'team.title': 'Кабинет команды',
      'team.tab.home': 'Главная',
      'team.tab.tests': 'Тесты',
      'team.tab.results': 'Результаты',
      'team.tab.settings': 'Настройки',
      'team.tab.rules': 'Правила',
      'team.tab.practice': 'Практика',
      'team.rules.hidden_note': 'Правила доступны здесь.',
      'team.timer': 'Осталось времени',
      'team.prev': 'Назад',
      'team.next': 'Далее',
      'team.submitting': 'Отправка...',
      'team.welcome': 'Добро пожаловать в кабинет команды!',
      'team.team_name': 'Название команды',
      'team.captain': 'Капитан',
      'team.email': 'Email',
      'team.phone': 'Телефон',
      'team.school': 'Школа',
      'team.city': 'Город',
      'team.members': 'Участники команды',
      'team.login': 'Логин',
      'team.settings_note': 'Для изменения данных обратитесь к администратору.',
      'team.no_tests': 'Нет тестов',
      'team.no_results': 'Результатов нет',
      'team.test_title': 'Тест',
      'team.score': 'Баллы',
      'team.date': 'Дата',
      'team.take_test': 'Пройти',
      'team.loading': 'Загрузка...',
      'team.loading_results': 'Загрузка результатов...',
      'team.loading_questions': 'Загрузка вопросов...',
      'team.test_unavailable': 'Тест сейчас недоступен',
      'team.empty_test': 'Пустой тест',
      'team.done': 'Готово',
      'team.error': 'Ошибка'
    },
    ky: {
      'nav.home': 'Башкы бет',
      'nav.register': 'Катталуу',
      'nav.login': 'Кирүү',
      'nav.profile': 'Команданын кабинети',
      'nav.logout': 'Чыгуу',
      'hero.title1': 'Akylman Quiz Bowl',
      'hero.subtitle': 'Орто жана жогорку класстын окуучулары үчүн',
      'hero.cta': 'Команданы каттоо',
      'about.title': 'Турнир жөнүндө',
      'about.prelim': 'Тандоо этабы',
      'about.prelim.desc': 'Бул кадамда топторду онлайн-тестирлөө аркылуу, бөлүнгөн категориялар боюнча сынак күтөт.',
      'about.semi': 'Жарым финал',
      'about.semi.desc': 'Бул этап эң алдынкы топтордун арасында дагы да алдыңкы топторду аныктайт. Бул кадамда сиздерди онлайн-тестирлөө аркылуу сынак күтөт.',
      'about.final': 'Финал',
      'about.final.desc': 'Финал оффлайн форматында, "Акылман" Президенттик лицейинде (Чолпон-Ата шаары) өткөрүлөт. Жарым финалдын натыйжасындагы эң алдыңкы топтор арасында жыйынтыктоочу сынак.',
      'how.title': 'Сынактын жүрүшү',
      'how.team': 'Топтордун курамы',
      'how.team.desc': '* Топтордун курамы 8-10 класстардын окуучуларынан туруусу зарыл. * Топтун мүчөлөрү бир мектептен болуусу зарыл. * Бир топто 3-6га чейин мүчө болуу керек.',
      'how.cats': 'Категориялар',
      'how.format': 'Сынактын форматы',
      'how.format.desc': '1 жана 2-этаптар онлайн форматта тестирлөө аркылуу өтөт. 3-этап (Финал) оффлайн түрүндө "Акылман" Президенттик лицейинде (Чолпон-Ата шаары) өтөт.',
      'timeline.title': 'Жүгүртмө',
      'timeline.final': '5-январь, 2026-жыл',
      'cats.title': 'Категориялар',
      'timeline.online1': 'Онлайн Этап 1',
      'timeline.online2': 'Онлайн Этап 2',
      'timeline.offline': 'Оффлайн Этап',
      'timeline.stage1.title': 'Этап 1 - Тандоо тур',
      'timeline.stage1.desc': 'Бул кадамда топторду онлайн-тестирлөө аркылуу, бөлүнгөн категориялар боюнча сынак күтөт. Катышуучулар көп тандама жана кыска жооптор менен суроолорго жооп беришет. Бул этаптын натыйжасында кийинки раундга өтө турган топтор аныкталат.',
      'timeline.stage2.title': 'Этап 2 - Жарым финал',
      'timeline.stage2.desc': 'Бул этап эң алдынкы топтордун арасында дагы да алдыңкы топторду аныктайт. Бул кадамда сиздерди онлайн-тестирлөө аркылуу сынак күтөт. Топтор ар кандай билим категориялары боюнча блиц-суроолорго жооп берип, реалдуу убакыт режиминде сынашат.',
      'timeline.stage3.title': 'Этап 3 - Финал',
      'timeline.stage3.desc': 'Финал оффлайн форматында, "Акылман" Президенттик лицейинде (Чолпон-Ата шаары) өткөрүлөт. Жарым финалдын натыйжасындагы эң алдыңкы топтор арасында жыйынтыктоочу сынак. Жеңүүчүлөр жалпы чогултулган упайлардын саны боюнча аныкталат.',
      'footer.cta_title': 'Акылманга сапар алыңыз!',
      'footer.cta_subtitle': 'Орто жана жогорку класстын окуучулары үчүн эл аралык интеллектуалдык турнирге кошулуңуз жана командаңыз менен жаңы мүмкүнчүлүктөрдү ачкыла.',
      'footer.cta_button': 'Команданы каттоо',
      'footer.student_project': 'Бул сайт — «Акылман» Президенттик лицейинин 10-класстын окуучусу тарабынан түзүлгөн окуу долбоору.',
      'footer.rights': 'Бардык укуктар корголгон.',
      'footer.privacy': 'Купуялуулук саясаты',
      'footer.terms': 'Катышуу шарттары',
      'login.title': 'Кирүү',
      'login.email': 'Электрондук почта',
      'login.login': 'Логин',
      'login.password': 'Сырсөз',
      'login.submit': 'Кирүү',
      'login.error': 'Туура эмес логин же пароль',
      'login.forgot_password': 'Парольду унутуп калдыңызбы?',
      'reset.title': 'Парольду калыбына келтирүү',
      'reset.enter_email': 'Код алуу үчүн электрондук почтаны киргизиңиз:',
      'reset.send_code': 'Кодду жөнөтүү',
      'reset.sending': 'Жөнөтүлүүдө...',
      'reset.enter_code_only': 'Каттагы кодду киргизиңиз:',
      'reset.enter_code': 'Каттагы кодду жана жаңы парольду киргизиңиз:',
      'reset.enter_new_password': 'Жаңы парольду киргизиңиз:',
      'reset.code': 'Каттагы код',
      'reset.new_password': 'Жаңы пароль',
      'reset.verify_code': 'Кодду текшерүү',
      'reset.verifying': 'Текшерүүдө...',
      'reset.reset': 'Парольду калыбына келтирүү',
      'reset.resetting': 'Калыбына келтирүүдө...',
      'reset.back': 'Артка',
      'reset.cancel': 'Жокко чыгаруу',
      'reset.code_sent': 'Код электрондук почтага жөнөтүлдү (эгер мындай email катталган болсо)',
      'reset.success': 'Пароль ийгиликтүү өзгөртүлдү! Эми сиз кире аласыз.',
      'reset.timer': 'Код жарактуу:',
      'register.title': 'Команданы каттоо',
      'register.team_name': 'Команданын аталышы',
      'register.login': 'Команданын логини',
      'register.password': 'Сырсөз',
      'register.password2': 'Сырсөздү кайталоо',
      'register.captain_name': 'Капитандын аты-жөнү',
      'register.captain_email': 'Капитандын электронндук почтасы',
      'register.captain_phone': 'Капитандын телефону',
      'register.school': 'Мектеп',
      'register.city': 'Мектептин адреси',
      'register.member_name': 'катышуучунун аты-жөнү',
      'register.member_class': 'Классы',
      'register.members_count': 'Катышуучулардын саны',
      'register.submit': 'Катталуу',
      'register.password.length': '8 символ',
      'register.password.number': 'Сан',
      'register.password.lowercase': 'Кичине тамга',
      'register.password.uppercase': 'Чоң тамга',
      'team.title': 'Команданын кабинети',
      'team.tab.home': 'Башкы',
      'team.tab.tests': 'Тесттер',
      'team.tab.results': 'Жыйынтыктар',
      'team.tab.settings': 'Орнотуулар',
      'team.tab.rules': 'Эреже',
      'team.tab.practice': 'Практика',
      'team.rules.hidden_note': 'Эрежелер бул жерде жеткиликтүү.',
      'team.timer': 'Калган убакыт',
      'team.prev': 'Артка',
      'team.next': 'Кийинки',
      'team.submitting': 'Жиберүү...',
      'team.welcome': 'Команда кабинетинен куттуктайбыз!',
      'team.team_name': 'Топтун аты',
      'team.captain': 'Капитан',
      'team.email': 'Электрондук почта',
      'team.phone': 'Телефон',
      'team.school': 'Мектеп',
      'team.city': 'Шаар',
      'team.members': 'Топтун мүчөлөрү',
      'team.login': 'Логин',
      'team.settings_note': 'Маалыматтарды өзгөртүү үчүн администраторго кайрылыңыз.',
      'team.no_tests': 'Тесттер жок',
      'team.no_results': 'Жыйынтыктар жок',
      'team.test_title': 'Тест',
      'team.score': 'Баллдар',
      'team.date': 'Дата',
      'team.take_test': 'Өтүү',
      'team.loading': 'Жүктөлүүдө...',
      'team.loading_results': 'Жыйынтыктар жүктөлүүдө...',
      'team.loading_questions': 'Суроолор жүктөлүүдө...',
      'team.test_unavailable': 'Тест азыр жеткиликтүү эмес',
      'team.empty_test': 'Бош тест',
      'team.done': 'Бүттү',
      'team.error': 'Ката'
    }
  };
  function applyI18n(lang, root){
    const dict = DICTS[lang] || DICTS.ru;
    (root||document).querySelectorAll('[data-i18n]').forEach(el=>{
      const key = el.getAttribute('data-i18n');
      if(dict[key]) {
        const text = dict[key];
        if(text.includes('*')){
          const items = text.split('*').filter(s=>s.trim());
          el.innerHTML = '<ul>' + items.map(item=>`<li>${item.trim()}</li>`).join('') + '</ul>';
        } else {
          el.textContent = text;
        }
      }
    });
    (root||document).querySelectorAll('[data-i18n-ph]').forEach(el=>{
      const key = el.getAttribute('data-i18n-ph');
      if(dict[key]) el.setAttribute('placeholder', dict[key]);
    });
  }
  function getLang(){ return localStorage.getItem('akylman_lang') || 'ru'; }
  function setLang(l){ localStorage.setItem('akylman_lang', l); applyI18n(l); try{ window.dispatchEvent(new CustomEvent('akyl-langchange',{ detail:{ lang:l } })); }catch(e){} }
  function initSwitcher(){
    document.querySelectorAll('.lang-switch button, .lang-switcher button').forEach(b=>{ b.onclick = ()=> setLang(b.dataset.lang); });
    applyI18n(getLang());
  }
  function t(key){ const d = DICTS[getLang()]||DICTS.ru; return d[key]||key; }
  window.AkylI18n = { applyI18n, getLang, setLang, initSwitcher, t };
  window.t = t;
})();
