(function(){
  const DICTS = {
    ru: {
      'nav.home': 'Главная',
      'nav.register': 'Зарегистрироваться',
      'nav.login': 'Войти',
      'nav.admin': 'Админ',
      'hero.title1': 'Akylman Quiz Bowl',
      'hero.subtitle': 'Для учеников средней и старшей школы',
      'hero.cta': 'Зарегистрироваться',
      'status.reg_open': 'Регистрация открыта!',
      'status.practice': 'Сдайте тест в кабинете.',
      'status.ceremony': 'Удачи!',
      'about.title': 'О соревновании',
      'about.prelim': 'Отборочный этап',
      'about.prelim.desc': 'На этом этапе команды проходят онлайн-тестирование по выбранным категориям.',
      'about.semi': 'Полуфинал',
      'about.semi.desc': 'Этап выявляет лучшие команды среди уже успешных. На этом этапе проводится онлайн-тестирование.',
      'about.final': 'Финал',
      'about.final.desc': 'Финал проводится в оффлайн формате в городе Чолпон-Ата, в Президентской школе "Акылман". Итоговый тест между лучшими командами по результатам полуфинала.',
      'how.title': 'Как это работает',
      'how.team': 'Размер команды',
      'how.team.desc': '3–6 человек из одной школы.',
      'how.cats': 'Категории',
      'how.time': 'Время',
      'how.time.desc': '60 минут. Окно доступа задается организатором.',
      'timeline.title': 'Таймлайн',
      'timeline.day1': 'День 1',
      'timeline.day2': 'День 2',
      'timeline.day3': 'День 3',
      'timeline.final': 'Финал',
      'cats.title': 'Категории',
      'cat.kg': 'Кыргызстан',
      'cat.history': 'История',
      'cat.stem': 'Илим/STEM',
      'cat.lit': 'Адабият',
      'cat.art': 'Өнөр & Спорт',
      'cat.kg.desc': 'Знания о Кыргызстане: география, культура, Конституция, гос. устройство. Развиваем интерес к Родине и гражданскую осознанность.',
      'cat.history.desc': 'История Кыргызстана и мира: эпохи, личности и ключевые события. Развитие исторического мышления.',
      'cat.stem.desc': 'Науки и технологии: физика, химия, биология, математика, ИТ. Логика и интерес к исследованиям.',
      'cat.lit.desc': 'Язык и литература (кыргызский/русский): грамматика, орфография, произведения и авторы. Языковая культура и мышление.',
      'cat.art.desc': 'Спорт и искусство: виды спорта, спортсмены, музыка, театр, живопись, кино. Ценность творчества и развития.',
      'login.title': 'Вход',
      'login.login': 'Логин',
      'login.password': 'Пароль',
      'login.submit': 'Войти',
      'register.title': 'Регистрация команды',
      'register.team_name': 'Название команды',
      'register.login': 'Логин команды',
      'register.password': 'Пароль',
      'register.password2': 'Повтор пароля',
      'register.captain_name': 'ФИО капитана',
      'register.captain_email': 'Email капитана',
      'register.captain_phone': 'Телефон капитана',
      'register.school': 'Школа',
      'register.city': 'Город',
      'register.members_count': 'Количество участников',
      'register.submit': 'Зарегистрироваться',
      'team.title': 'Кабинет команды',
      'team.tab.home': 'Главная',
      'team.tab.tests': 'Тесты',
      'team.tab.results': 'Результаты',
      'team.tab.settings': 'Настройки',
      'team.tab.rules': 'Правила',
      'team.tab.practice': 'Практика',
      'team.rules.hidden_note': 'Правила доступны здесь.',
      'team.timer': 'Осталось времени',
      'team.prev': 'Назад',
      'team.next': 'Далее',
      'team.submitting': 'Отправка...'
    },
    ky: {
      'nav.home': 'Башкы бет',
      'nav.register': 'Катталуу',
      'nav.login': 'Кирүү',
      'nav.admin': 'Админ',
      'hero.title1': 'Akylman Quiz Bowl',
      'hero.subtitle': 'Орто жана жогорку класстын окуучулары үчүн',
      'hero.cta': 'Команданы каттоо',
      'status.reg_open': 'Каттоо ачык!',
      'status.practice': 'Кабинетте тест тапшырыңыз.',
      'status.ceremony': 'Ийгилик!',
      'about.title': 'Турнир жөнүндө',
      'about.prelim': 'Тандоо этабы',
      'about.prelim.desc': 'Бул кадамда топторду онлайн-тестирлөө аркылуу, бөлүнгөн категориялар боюнча сынак күтөт.',
      'about.semi': 'Жарым финал',
      'about.semi.desc': 'Бул этап эң алдынкы топтордун арасында дагы да алдыңкы топторду аныктайт. Бул кадамда сиздерди онлайн-тестирлөө аркылуу сынак күтөт.',
      'about.final': 'Финал',
      'about.final.desc': 'Финал оффлайн форматында, Чолпон-Ата шаары, "Акылман" Президенттик лицейинде өткөрүлөт. Жарым финалдын натыйжасындагы эң алдыңкы топтор арасында жыйынтыктоочу сынак.',
      'how.title': 'Кантип өтөт',
      'how.team': 'Команда курамы',
      'how.team.desc': 'Бир мектептен 3–6 окуучу.',
      'how.cats': 'Категориялар',
      'how.time': 'Убакыт',
      'how.time.desc': '60 мүнөт. Кирүү терезесин уюштуруучу коёт.',
      'timeline.title': 'Таймлайн',
      'timeline.day1': 'Күн 1',
      'timeline.day2': 'Күн 2',
      'timeline.day3': 'Күн 3',
      'timeline.final': 'Финал',
      'cats.title': 'Категориялар',
      'cat.kg': 'Кыргызстан',
      'cat.history': 'Тарых',
      'cat.stem': 'Илим/STEM',
      'cat.lit': 'Адабият',
      'cat.art': 'Өнөр & Спорт',
      'cat.kg.desc': 'Кыргызстан боюнча билим: география, маданият, Конституция, мамлекеттик түзүлүш. Мекенге кызыгуу жана жарандык аң-сезим.',
      'cat.history.desc': 'Кыргызстан жана дүйнө тарыхы: доорлор, инсандар, окуялар. Тарыхый ой жүгүртүү.',
      'cat.stem.desc': 'Илим жана технология: физика, химия, биология, математика, ИТ. Логика жана изилдөөгө кызыгуу.',
      'cat.lit.desc': 'Тил жана адабият (кыргыз/орус): грамматика, орфография, чыгармалар, авторлор. Тил маданияты жана ой жүгүртүү.',
      'cat.art.desc': 'Спорт жана өнөр: спорт түрлөрү, спортчулар, музыка, театр, сүрөт, кино. Чыгармачылык жана өнүгүү.',
      'login.title': 'Кирүү',
      'login.login': 'Логин',
      'login.password': 'Сырсөз',
      'login.submit': 'Кирүү',
      'register.title': 'Команданы каттоо',
      'register.team_name': 'Команданын аталышы',
      'register.login': 'Команданын логини',
      'register.password': 'Сырсөз',
      'register.password2': 'Сырсөздү кайталоо',
      'register.captain_name': 'Капитандын ФИО',
      'register.captain_email': 'Капитандын Email',
      'register.captain_phone': 'Капитандын телефону',
      'register.school': 'Мектеп',
      'register.city': 'Шаар',
      'register.members_count': 'Катышуучулардын саны',
      'register.submit': 'Катталуу',
      'team.title': 'Команданын кабинети',
      'team.tab.home': 'Башкы',
      'team.tab.tests': 'Тесттер',
      'team.tab.results': 'Жыйынтыктар',
      'team.tab.settings': 'Орнотуулар',
      'team.tab.rules': 'Эреже',
      'team.tab.practice': 'Практика',
      'team.rules.hidden_note': 'Эрежелер бул жерде жеткиликтүү.',
      'team.timer': 'Калган убакыт',
      'team.prev': 'Артка',
      'team.next': 'Кийинки',
      'team.submitting': 'Жиберүү...'
    }
  };
  function applyI18n(lang, root){
    const dict = DICTS[lang] || DICTS.ru;
    (root||document).querySelectorAll('[data-i18n]').forEach(el=>{
      const key = el.getAttribute('data-i18n');
      if(dict[key]) el.textContent = dict[key];
    });
    (root||document).querySelectorAll('[data-i18n-ph]').forEach(el=>{
      const key = el.getAttribute('data-i18n-ph');
      if(dict[key]) el.setAttribute('placeholder', dict[key]);
    });
  }
  function getLang(){ return localStorage.getItem('akylman_lang') || 'ru'; }
  function setLang(l){ localStorage.setItem('akylman_lang', l); applyI18n(l); try{ window.dispatchEvent(new CustomEvent('akyl-langchange',{ detail:{ lang:l } })); }catch(e){} }
  function initSwitcher(){
    document.querySelectorAll('.lang-switch button, .lang-switcher button').forEach(b=>{ b.onclick = ()=> setLang(b.dataset.lang); });
    applyI18n(getLang());
  }
  function t(key){ const d = DICTS[getLang()]||DICTS.ru; return d[key]||key; }
  window.AkylI18n = { applyI18n, getLang, setLang, initSwitcher, t };
  window.t = t;
})();
