<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Akylman Quiz Bowl</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Plus+Jakarta+Sans:wght@500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <header class="header">
    <div class="container">
      <a href="/" class="logo">
        <img src="images/logo.png" alt="Akylman">
      </a>
      <nav class="nav">
        <a href="/" data-i18n="nav.home">–ì–ª–∞–≤–Ω–∞—è</a>
        <a href="pages/register.html" data-i18n="nav.register" id="nav-register">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
        <a href="pages/login.html" data-i18n="nav.login" id="nav-login">–í—Ö–æ–¥</a>
        <a href="pages/profile.html" id="nav-profile" style="display:none;">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</a>
        <a href="javascript:void(0)" id="nav-logout" style="display:none; cursor:pointer;" onclick="logout()">–í—ã—Ö–æ–¥</a>
      </nav>
      <div class="lang-switcher">
        <button class="lang-btn" data-lang="ru">–†–£</button>
        <button class="lang-btn" data-lang="ky">–ö–´</button>
      </div>
    </div>
  </header>

  <main>
    <section class="hero">
      <div class="container">
        <div class="hero-content">
          <h1 data-i18n="hero.title1">Akylman Quiz Bowl</h1>
          <p class="hero-subtitle" data-i18n="hero.subtitle">–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–µ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–µ –ø–æ –∑–Ω–∞–Ω–∏—è–º –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤</p>
          <div class="hero-cta">
            <a href="pages/register.html" class="btn btn-primary" data-i18n="hero.cta">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a>
            <a href="#about" class="btn btn-outline" data-i18n="cats.title">–£–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ</a>
          </div>
        </div>
      </div>
    </section>

    <section id="about" class="section">
      <div class="container">
        <h2 class="section-title" data-i18n="about.title">–û —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–∏</h2>
        <div class="cards-grid">
          <div class="card">
            <div class="card-icon">üìù</div>
            <h3 data-i18n="about.prelim">–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π —Ä–∞—É–Ω–¥</h3>
            <p data-i18n="about.prelim.desc">–û–Ω–ª–∞–π–Ω-—Ç–µ—Å—Ç: –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä –∏ –∫–æ—Ä–æ—Ç–∫–∏–π –æ—Ç–≤–µ—Ç</p>
          </div>
          <div class="card">
            <div class="card-icon">üéØ</div>
            <h3 data-i18n="about.semi">–ü–æ–ª—É—Ñ–∏–Ω–∞–ª</h3>
            <p data-i18n="about.semi.desc">–ñ–∏–≤—ã–µ –±–ª–∏—Ü-–≤–æ–ø—Ä–æ—Å—ã –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏</p>
          </div>
          <div class="card">
            <div class="card-icon">üèÜ</div>
            <h3 data-i18n="about.final">–§–∏–Ω–∞–ª</h3>
            <p data-i18n="about.final.desc">–§–∏–Ω–∞–ª—å–Ω—ã–π —Ä–∞—É–Ω–¥ —Å –ª—É—á—à–∏–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏</p>
          </div>
        </div>
      </div>
    </section>

    <section class="section section-alt">
      <div class="container">
        <h2 class="section-title" data-i18n="how.title">–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç</h2>
        <div class="features-grid">
          <div class="feature">
            <h3 data-i18n="how.team">–†–∞–∑–º–µ—Ä –∫–æ–º–∞–Ω–¥—ã</h3>
            <p data-i18n="how.team.desc">3‚Äì6 —á–µ–ª–æ–≤–µ–∫ –∏–∑ –æ–¥–Ω–æ–π —à–∫–æ–ª—ã</p>
          </div>
          <div class="feature">
            <h3 data-i18n="how.cats">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</h3>
            <div id="cats-list"></div>
          </div>
          <div class="feature">
            <h3>–§–æ—Ä–º–∞—Ç</h3>
            <p>–û–Ω–ª–∞–π–Ω –∏ –æ—Ñ—Ñ–ª–∞–π–Ω —Ä–∞—É–Ω–¥—ã —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ñ–æ—Ä–º–∞—Ç–∞–º–∏</p>
          </div>
        </div>
      </div>
    </section>

    <section class="section">
      <div class="container">
        <h2 class="section-title" data-i18n="timeline.title">–¢–∞–π–º–ª–∞–π–Ω</h2>
        <div class="timeline">
          <div class="timeline-item">
            <div class="timeline-marker"></div>
            <div class="timeline-content">
              <div class="timeline-date" id="d1">–î–µ–Ω—å 1</div>
              <p>–û–Ω–ª–∞–π–Ω —Ç–µ—Å—Ç</p>
            </div>
          </div>
          <div class="timeline-item">
            <div class="timeline-marker"></div>
            <div class="timeline-content">
              <div class="timeline-date" id="d2">–î–µ–Ω—å 2</div>
              <p>–û–Ω–ª–∞–π–Ω —Ç–µ—Å—Ç</p>
            </div>
          </div>
          <div class="timeline-item">
            <div class="timeline-marker"></div>
            <div class="timeline-content">
              <div class="timeline-date" id="d3">–î–µ–Ω—å 3</div>
              <p>–û–Ω–ª–∞–π–Ω —Ç–µ—Å—Ç</p>
            </div>
          </div>
          <div class="timeline-item">
            <div class="timeline-marker"></div>
            <div class="timeline-content">
              <div class="timeline-date" data-i18n="timeline.final">–§–∏–Ω–∞–ª</div>
              <p id="finalPlace">APS –æ—Ñ—Ñ–ª–∞–π–Ω</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="cats" class="section section-alt">
      <div class="container">
        <h2 class="section-title" data-i18n="cats.title">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</h2>
        <div class="categories-grid" id="catsGrid"></div>
      </div>
    </section>

    <section class="section">
      <div class="container">
        <h2 class="section-title">–ì–∞–ª–µ—Ä–µ—è</h2>
        <div class="gallery">
          <figure class="gallery-item">
            <img src="images/akylman-1.jpg" alt="Akylman campus">
            <figcaption>–ö–∞–º–ø—É—Å</figcaption>
          </figure>
          <figure class="gallery-item">
            <img src="images/akylman-2.jpg" alt="Akylman visitors">
            <figcaption>–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ</figcaption>
          </figure>
          <figure class="gallery-item">
            <img src="images/akylman-3.jpg" alt="Akylman opening">
            <figcaption>–û—Ç–∫—Ä—ã—Ç–∏–µ</figcaption>
          </figure>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="container">
      <p>&copy; 2025 Akylman Presidential School. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
    </div>
  </footer>

  <script src="js/i18n.js"></script>
  <script>
    AkylI18n.initSwitcher();
    
    function updateNavBar() {
      const token = localStorage.getItem('akylman_token');
      const registerLink = document.getElementById('nav-register');
      const loginLink = document.getElementById('nav-login');
      const profileLink = document.getElementById('nav-profile');
      const logoutLink = document.getElementById('nav-logout');
      
      if (token) {
        registerLink.style.display = 'none';
        loginLink.style.display = 'none';
        profileLink.style.display = 'block';
        logoutLink.style.display = 'block';
      } else {
        registerLink.style.display = 'block';
        loginLink.style.display = 'block';
        profileLink.style.display = 'none';
        logoutLink.style.display = 'none';
      }
    }
    
    function logout() {
      if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –≤—ã–π—Ç–∏?')) {
        localStorage.removeItem('akylman_token');
        localStorage.removeItem('team');
        updateNavBar();
        window.location.href = '/';
      }
    }
    
    updateNavBar();
    
    async function renderSettings() {
      try {
        const s = await fetch('/api/settings').then(r => r.json());
        const lang = AkylI18n.getLang();
        if (s) {
          if (s.day1_date) document.getElementById('d1').textContent = s.day1_date;
          if (s.day2_date) document.getElementById('d2').textContent = s.day2_date;
          if (s.day3_date) document.getElementById('d3').textContent = s.day3_date;
          if (s.final_place_ru || s.final_place_ky) {
            document.getElementById('finalPlace').textContent = lang === 'ky' ? (s.final_place_ky || '') : (s.final_place_ru || '');
          }
        }
      } catch (e) { console.warn('settings load failed', e); }
    }
    
    async function renderCategories() {
      try {
        const cats = await fetch('/api/categories').then(r => r.json());
        const lang = AkylI18n.getLang();
        const grid = document.getElementById('catsGrid');
        const list = document.getElementById('cats-list');
        
        grid.innerHTML = cats.map(c => {
          const title = lang === 'ky' ? (c.name_ky || '') : (c.name_ru || '');
          const desc = lang === 'ky' ? (c.desc_ky || '') : (c.desc_ru || '');
          return `<div class="category-card"><h4>${title}</h4><p>${desc}</p></div>`;
        }).join('');
        
        list.innerHTML = '<ul>' + cats.map(c => {
          const title = lang === 'ky' ? (c.name_ky || '') : (c.name_ru || '');
          return `<li>${title}</li>`;
        }).join('') + '</ul>';
      } catch (e) { console.warn('categories load failed', e); }
    }
    
    renderSettings();
    renderCategories();
    window.addEventListener('akyl-langchange', () => {
      AkylI18n.applyI18n(AkylI18n.getLang());
      renderSettings();
      renderCategories();
    });
  </script>
</body>
</html>
