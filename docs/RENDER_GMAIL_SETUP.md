# Подробная инструкция: Настройка Gmail в Render

## Шаг 1: Вход в Render Dashboard

1. Откройте https://dashboard.render.com
2. Войдите в свой аккаунт

## Шаг 2: Найти ваш сервис

1. В левом меню нажмите на **"Services"** (или "Сервисы")
2. Найдите ваш сервис с названием типа `akylman-quiz` или похожим
3. **Кликните на название сервиса**, чтобы открыть его настройки

## Шаг 3: Открыть раздел Environment

1. В открывшейся странице сервиса найдите меню слева или вкладки сверху
2. Найдите и нажмите на **"Environment"** (или "Переменные окружения")
   - Обычно это вторая или третья вкладка после "Settings"
   - Может называться "Environment Variables" или "Env Vars"

## Шаг 4: Добавить переменные Gmail

Вы увидите список существующих переменных окружения (если они есть) и форму для добавления новых.

### Добавление первой переменной:

1. Найдите поле **"Key"** (или "Ключ") - это название переменной
2. Введите: `GMAIL_USER`
3. Найдите поле **"Value"** (или "Значение") - это значение переменной
4. Введите ваш Gmail адрес: `your-email@gmail.com`
   - Замените `your-email@gmail.com` на ваш реальный email
   - Пример: `akylman.quiz@gmail.com`
5. Нажмите кнопку **"Add"** (или "Добавить") / **"Save"** (или "Сохранить")

### Добавление второй переменной:

1. Снова найдите поле **"Key"**
2. Введите: `GMAIL_APP_PASSWORD`
3. В поле **"Value"** введите ваш 16-значный пароль приложения
   - Это пароль, который вы получили на https://myaccount.google.com/apppasswords
   - Пример: `abcdefghijklmnop`
   - **Важно:** вводите без пробелов!
4. Нажмите **"Add"** / **"Save"**

## Шаг 5: Проверка добавленных переменных

После добавления вы должны увидеть в списке две переменные:

```
GMAIL_USER = your-email@gmail.com
GMAIL_APP_PASSWORD = abcdefghijklmnop
```

## Шаг 6: Сохранение и перезапуск

1. Убедитесь, что все переменные добавлены правильно
2. Нажмите кнопку **"Save Changes"** (или "Сохранить изменения") если она есть
3. Перейдите на вкладку **"Events"** или **"Logs"** (или "События" / "Логи")
4. Найдите кнопку **"Manual Deploy"** → **"Deploy latest commit"** (или "Развернуть последний коммит")
   - Или просто подождите автоматического перезапуска (обычно происходит автоматически)

## Визуальная схема интерфейса Render:

```
Render Dashboard
│
├── Services (Сервисы)
│   └── [Ваш сервис] ← Кликните здесь
│       │
│       ├── Settings (Настройки)
│       ├── Environment ← ВОТ ЗДЕСЬ! Кликните
│       │   │
│       │   ├── [Список существующих переменных]
│       │   │
│       │   └── [Форма добавления]
│       │       ├── Key: GMAIL_USER
│       │       ├── Value: your-email@gmail.com
│       │       └── [Add/Save кнопка]
│       │
│       ├── Events (События)
│       └── Logs (Логи)
```

## Пример заполнения:

### Переменная 1:
- **Key:** `GMAIL_USER`
- **Value:** `akylman.quiz@gmail.com`

### Переменная 2:
- **Key:** `GMAIL_APP_PASSWORD`
- **Value:** `abcd efgh ijkl mnop` → введите как `abcdefghijklmnop` (без пробелов!)

## Важные моменты:

⚠️ **Не добавляйте кавычки** вокруг значений - Render сам обработает их

⚠️ **Пароль приложения** должен быть без пробелов, даже если Google показывает его с пробелами

✅ **Значения чувствительны к регистру** - `GMAIL_USER` и `gmail_user` это разные переменные

✅ После добавления переменных сервис **автоматически перезапустится** (обычно через 1-2 минуты)

## Проверка что всё работает:

1. После перезапуска перейдите на вкладку **"Logs"**
2. Найдите строки о запуске сервера - не должно быть ошибок об email
3. Попробуйте функцию "Забыли пароль?" на сайте
4. Проверьте почту (включая папку "Спам")

## Если что-то не работает:

1. **Проверьте логи** в Render:
   - Вкладка "Logs" → ищите ошибки связанные с "email", "smtp", "nodemailer"
   
2. **Проверьте переменные**:
   - Убедитесь, что названия переменных точно: `GMAIL_USER` и `GMAIL_APP_PASSWORD`
   - Убедитесь, что значения введены правильно (email с @gmail.com, пароль без пробелов)

3. **Проверьте пароль приложения**:
   - Убедитесь, что двухэтапная аутентификация включена
   - Убедитесь, что пароль приложения создан правильно
   - Можно создать новый пароль приложения и обновить переменную

4. **Перезапустите сервис вручную**:
   - Вкладка "Events" → "Manual Deploy" → "Deploy latest commit"

## Альтернативный способ (через Render CLI):

Если у вас установлен Render CLI, можно добавить переменные через командную строку:

```bash
render env set GMAIL_USER=your-email@gmail.com --service your-service-name
render env set GMAIL_APP_PASSWORD=abcdefghijklmnop --service your-service-name
```

Но проще всего через веб-интерфейс, как описано выше.

